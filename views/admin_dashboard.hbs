<!--File: admin_dashboard.hbs-->
<!--Authors: Alex Antaki, Matthew Oakley, Alex Mahlmeister, Raislan Aiken, and Jaspreet Singh-->
<!--Date: 11/10/2019-->
<!--Description: This is the body of the admin_dashboard page-->

<!--This div holds the main admin dashboard-->
<div style="margin-top: 30px;margin-bottom: 50px;">
      <div class="container-fluid">
          <div class="row">
              <div class="col-md-12 offset-xl-1" style="margin-top: 25px;height: 90px;margin-bottom: 10px;">
                  <h1 id="welcomeName" style="color: rgb(133,135,150);font-size: 35px;"><strong>Hi There, {{userInfo.firstname}}!</strong></h1>
              </div>
          </div>

          <!--Here is the links in the nav bar that are the dashboard, manage inventory, manage orders, and manage accounts-->
          <div class="row justify-content-center align-items-center" style="height: 100%;">
              <div class="col-auto col-sm-11 col-md-9 col-lg-9 col-xl-11 text-break text-center align-self-center m-auto" style="padding: 5px;padding-left: 40px;">
                  <div class="card">
                      <div class="card-header">
                          <ul class="nav nav-tabs card-header-tabs">
                              <li class="nav-item"><a class="nav-link active" href="/login" style="font-size: 20px;">Dashboard</a></li>
                              <li class="nav-item"><a class="nav-link" href="/admin_dashboard/manage_inventory" style="font-size: 20px;">Manage Inventory</a></li>
                              <li class="nav-item"><a class="nav-link" href="/admin_dashboard/manage_orders" style="font-size: 20px;">Manage Order(s)</a></li>
                              <li class="nav-item"><a class="nav-link" href="/admin_dashboard/manage_accounts" style="font-size: 20px;">Manage Accounts</a></li>
                          </ul>
                      </div>
                      <!--This is the recent orders part that has on the dashboard-->
                      <div class="card-body">
                          <h4 class="card-title" style="font-size: 28px;margin-top: 20px;">Admin Dashboard</h4>
                          <div class="col align-self-center m-auto">
                              <h4 style="margin-top: 65px;"><em>Recent Order(s)</em></h4><a href="/admin_dashboard/manage_orders">View All Orders</a>
                              <div class="table-responsive" style="margin-top: 40px;padding: 10px;height: 280px;">
                                  {{#if hasOrders}}
                                    <!--This is the order table-->
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Order</th>
                                                <th>Customer Id</th>
                                                <th>Date Placed</th>
                                                <th>Delivery Method</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {{#each orders}}
                                            <tr>
                                                <td>{{ordernum}}</td>
                                                <td>{{customernum}}</td>
                                                <td>{{orderdate}}</td>
                                                <td>{{shipperid}}</td>
                                            </tr>
                                            {{/each}}
                                        </tbody>
                                    </table>
                                  {{else}}
                                  <p> Sadly there haven't been any orders yet.
                                  {{/if}}
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

<input type=button value="logout" onClick="eraseCookie()"/>
<!-- <h2> ADMIN ACCOUNT DASHBOARD PAGE!!!! </h2>
<h2> THEY DO!!!! 🐐🐐🐐🐐🐐🐐🐐🐐 </h2>

<ul>
  <li> <a href="/admin_dashboard"> Main </a> </li>
  <li> <a href="/admin_dashboard/manage_inventory"> Manage Inventory </a> </li>
  <li> <a href="/admin_dashboard/manage_orders"> Manage Orders </a> </li>
  <li> <a href="/admin_dashboard/manage_accounts"> Manage Accounts </a> </li>
</ul> -->

<!--This is the logout function-->
<script> function eraseCookie() {
  // make the api call
  fetch("/api/logout",
    {method: "POST",
      headers: {
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
    })
    .then(function(response) {
      if (response.status !== 200) {
        alert("Logout failed. Try again.");
        location.reload(true);
        return
      } else {
        // send to a webpage
        location.reload(true);
        return;
      }
    });
}

</script>
