<!--File: check_out.hbs-->
<!--Authors: Alex Antaki, Matthew Oakley, Alex Mahlmeister, Raislan Aiken, and Jaspreet Singh-->
<!--Date: 11/18/2019-->
<!--Description: This is the body of the checkout page-->

<!--This is the link to go back to the cart-->
<header></header><a href="/cart" style="font-size: 20px;margin-left: 40px;margin-top: 0px;color: rgb(133,135,150);">Back To Cart</a>
<main class="page payment-page">
    <section class="clean-block payment-form dark">
        <div class="text-center block-heading" style="margin-top: 0px;">
            <!--This is the checkout heading we see-->
            <h3 style="color: rgb(125,130,133);font-size: 38px;margin-top: 60px;"><strong>Checkout</strong></h3>
            <p style="margin-bottom: 0px;font-size: 25px;margin-top: 20px;">You Have Made A Great Selection!<br>Please Enter The Following Information To Complete Your Order</p>
        </div>
        <div class="container border rounded shadow-sm" style="margin-top: 50px;padding-top: 20px;padding-bottom: 20px;padding-right: 20px;background-color: #ffffff;"><button class="btn btn-primary" id="backToShipping" type="button" style="background-color: rgb(137,140,149);display: none;margin-top: 10px;margin-bottom: 30px;">Back To Shipping Information</button>
            <div class="form-group">
                <!--This is the form we use to order-->
                <form>
                    <div id="shipping" class="card-details" style="margin-top: 10px;">
                        <h3 class="title" style="font-size: 30px;"><strong>Delivery Details</strong></h3>
                        <p style="margin-top: 40px;font-size: 22px;">Choose Your Preferred Method Of Delivery</p>
                        <form>
                            <div class="form-group" style="padding-left: 10px;"><select class="custom-select" id="deliveryMethod" style="width: 270px;margin-top: 20px;height: 45px;font-size: 17px;"><optgroup label="Delivery Method"><option value="shipToAddress" selected="">Ship To Address</option><option value="pickUpInStore">Pick Up In Store (No Additional Fee)</option></optgroup></select></div>
                        </form>
                        <p style="margin-top: 40px;font-size: 22px;margin-bottom: 30px;">Please Fill Out The Information Below</p>
                        <div id="shipToAddress" style="display:block;">
                            <div class="form-row" style="padding-left: 10px;">

                                <div class="col-sm-7" id="recipientName">

                                    <div class="form-group"><label for="card-holder" style="font-size: 17px;"><strong>First Name</strong></label><input class="form-control" type="text" id="firstName"  placeholder="First Name" value="{{customerInfo.firstname}}"minlength="1" required="">
                                    <!--This is the validation funciton for the recipient name-->

                                  </div>
                                </div>
                                <div class="form-row" style="padding-left: 10px;">

                                    <div class="col-sm-7" id="recipientName">

                                        <div class="form-group"><label for="card-holder" style="font-size: 17px;"><strong>Last Name</strong></label><input class="form-control" type="text" id="lastName"  placeholder="Last Name" value="{{customerInfo.lastname}}" minlength="1" required="">
                                        <!--This is the validation funciton for the recipient name-->

                                    </div>
                                </div>
                                <!--This is the phone number-->
                                <div class="col-sm-7" id="phoneNumber" style="height: 87px;">
                                    <div class="form-group" style="height: 27px;"><label for="card-holder" style="font-size: 17px;"><strong>Phone Number (No dashes needed)</strong></label><input class="form-control" type="tel"  name="phoneNumber" id="phoneNumber" placeholder="Phone Number" value="{{customerInfo.phonehome}}" required="" minlength="1" maxlength = "13" inputmode="tel">
                                      <!--This is the validation function for the phone number-->
                                      <script type = "text/javascript">

                                      </script>
                                    </div>
                                </div>
                                <!--This is the address box-->
                                <div class="col-sm-8" id="address1">
                                    <div class="form-group"><label for="card-number" style="font-size: 17px;"><strong>Address 1</strong></label><input class="form-control" type="text"  value="{{customerInfo.address1}}" name="shippingAddress1" id="shippingAddress1" placeholder="Address 1" required="" minlength="1">
                                      <!--This is the validation function for the address-->

                                    </div>
                                </div>
                                <!--This is the address 2 section-->
                                <div class="col-sm-8" id="address2">
                                    <div class="form-group"><label for="card-number" style="font-size: 17px;"><strong>Address 2</strong></label><input class="form-control" type="text"  id="shippingAddress2" value="{{customerInfo.address2}}" placeholder="Address 2">
                                      <!--This is the validation script for the address-->

                                    </div>
                                </div>
                                <!--This is the city field-->
                                <div class="col-sm-8 col-xl-5 offset-xl-0" id="city">
                                    <div class="form-group"><label for="card-number" style="font-size: 17px;"><strong>City</strong></label><input class="form-control"  type="text" name="shippingCity" id="shippingCity" value="{{customerInfo.citycode}}" placeholder="City" required="" minlength="1">
                                      <!--This is validation for the city field-->

                                    </div>
                                </div>
                                <!--This is the zip code-->
                                <div class="col-sm-8 col-xl-3" id="zipCode">
                                    <div class="form-group"><label for="card-number" style="font-size: 17px;"><strong>Zip Code</strong></label><input class="form-control" type="text"  id="shippingZipCode" placeholder="Zip Code" value="{{customerInfo.postcode}}" required="" minlength="5" maxlength = "5" pattern="/(^\d{5}$)|(^\d{5}-\d{4}$)/"
                                            inputmode="numeric">
                                        <!--This is the validation for the zip-->

                                    </div>
                                </div>
                                <!--This is the state-->
                                <div class="col-sm-8 col-xl-3" id="state">
                                    <div class="form-group"><label for="card-number" style="font-size: 17px;"><strong>State (Two Letter, "NY" or "FL")</strong></label><input class="form-control" type="text" id="shippingState" value="{{customerInfo.statecode}}"  placeholder="State" required="" minlength="2" maxlength="2">
                                      <!--This is the validation for the state-->

                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                        <div class="col-sm-12" id="proceed">
                            <div class="form-group"><button class="btn btn-primary btn-block" onclick = "verifyFirstName(firstName.value, id); verifyLastName(lastName.value, id); verifyPhoneNum(phoneNumber.value, id); verifyAddress(shippingAddress1.value, id); verifyAddress2(shippingAddress2.value, id); verifyCity(shippingCity.value, id); verifyZip(shippingZipCode.value, id); verifyState(shippingState.value, id);" id="proceedShipping" type="button" style="background-color: rgb(79,121,96);margin-top: 20px;height: 40px;font-size: 20px;">Proceed</button></div>
                        </div>
                    </div>
                </form>

                <!--This is the next part of the page that is our cart-->
                <form>
                    <div class="border rounded products" id="cartContent" style="margin-top: 0px;background-color: rgb(248,247,245);display: none;">
                        <h3 class="text-center title" style="margin-top: 0px;padding-bottom: 10px;padding-top: 10px;">Cart Summary</h3>
                        <div class="form-row no-gutters text-left justify-content-center align-items-center" style="/*overflow: auto;*/">
                            <div class="col-sm-auto col-md-auto col-lg-auto col-xl-7" style="overflow: auto;height: 300px;padding: 5px;">
                                <div class="items">
                                    <div class="product">
                                      {{#each items}}
                                        <!--These divs are they product listings on the left hand side-->

                                        <div class="form-row justify-content-center align-items-center" style="margin-bottom: 5px;margin-top: 5px;padding-top: 5px;padding-right: 5px;padding-bottom: 5px;padding-left: 5px;">
                                            <div class="col" id="nameOfItem"><a class="product-name" href="/marketItem/{{itemId}}" style="font-size: 20px;">{{name}}</a></div>
                                            <!--This is where the price per unit area is-->

                                            <div class="col-md-5 col-xl-4 product-info">
                                                <div class="product-specs">
                                                    <div><span>Price Per Unit:&nbsp;</span><span id="pricePerUnit" class="value">${{price}}</span></div>
                                                </div>
                                            </div>
                                            <!--This is the total price section-->

                                            <div class="col-6 col-md-2 col-xl-2 quantity"><label class="d-none d-md-block" for="quantity">Quantity</label><input class="form-control form-control quantity-input" type="number" id="quantity" value="{{quantity}}" readonly=""></div>
                                            <div class="col-6 col-md-2 col-xl-2 text-right price"
                                                id="totalItemPrice" style="margin-top: 5px;"><span id="totalItemPrice">${{total}}</span></div>
                                        </div>
                                      {{/each}}
                                </div>
                            </div>
                            <!--This is the summary page at the end of the checkout section-->
                            <div class="col-auto col-sm-auto col-md-auto col-lg-auto col-xl-3 text-center" style="background-color: rgb(248,247,245);min-width: 279px;">
                                <div class="summary">
                                    <h2 style="padding-bottom: 15px;background-color: rgb(248,247,245);color: rgb(133,135,150);padding-top: 15px;font-size: 25px;"><strong><em>Summary</em></strong></h2>
                                    <h4 class="text-center" style="padding-bottom: 5px;padding-top: 5px;"><span class="text" style="font-size: 22px;">Subtotal: &nbsp;</span><span id="subtotalPrice" class="price" style="font-size: 22px;">$25.00</span></h4>
                                    <h4 style="padding-bottom: 17px;padding-top: 5px;height: 38px;"><span class="text" style="font-size: 22px;">Shipping: &nbsp;</span><span id="shippingPrice" class="price" style="font-size: 22px;">$5.99</span></h4>
                                    <h4 id="goatPointsSummary" style="padding-bottom: 17px;padding-top: 5px;height: 38px;display:none;"><span class="text" style="font-size: 22px;">Goat Points: &nbsp;</span><span id="shippingPrice" class="price" style="font-size: 22px;">$5.99</span></h4>
                                    <h4 class="text-center" style="padding-bottom: 5px;padding-top: 5px;"><span class="text" style="font-size: 22px;">Tax: &nbsp;</span><span id="taxPrice" class="price" style="font-size: 22px;">$3.00</span></h4>
                                    <h4 style="padding-bottom: 10px;padding-top: 26px;margin-bottom: 45px;margin-top: 5px;"><span class="text" style="font-size: 25px;"><strong>Total: &nbsp;</strong></span><span id="totalPrice" class="price" style="font-size: 25px;"><strong>$30.99</strong></span></h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--This is the goat points section-->
                    <div id="goatPoints" class="card-details" style="margin-top: 30px; display: none;">
                        <h3 class="title" style="font-size: 30px;margin-bottom: 20px;"><strong>Goat Points Details</strong></h3>
                        <p style="font-size: 20px;margin-bottom: 30px;">Want To Use Goat Points With Your Order?<br>Just Click Apply To Use It Towards Your Balance!</p>
                        <div class="form-row">
                            <div class="col-sm-8">
                                <div class="form-group"><label for="card-number"><strong>Goat Points Balance:</strong></label><input class="form-control" type="text" id="goatPointBalance" style="width: 250px;" value="{{goatPoints}}"readonly="" placeholder="Goat Points"></div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group"><button class="btn btn-primary" id="applyGoatPoints" type="button" style="background-color: rgb(79,121,96);margin-top: 20px;height: 40px;">Apply Goat Points</button><button class="btn btn-primary" id="unapplyGoatPoints"
                                        type="button" style="background-color: rgb(105,104,104);margin-top: 20px;height: 40px;display:none;">Un-Apply Goat Points</button></div>
                            </div>
                        </div>
                    </div>
                    <!--This is the credit information form-->
                    <div id="purchase" class="card-details" style="margin-top: 50px;display: none;">
                        <h3 class="title" style="font-size: 30px;margin-bottom: 40px;"><strong>Credit Card Details</strong></h3>
                        <div class="form-row">
                            <div class="col-sm-7">
                                <div class="form-group"><label for="card-holder">Card Holder</label><input class="form-control" type="text" id="cardHolder"  placeholder="Card Holder">
                                  <!--This is the validation for the card holders-->
                                  <script type = "text/javascript">

                                  </script>
                                </div>
                            </div>
                            <!--This is the expiration field-->
                            <div class="col-sm-5">
                                <div class="form-group"><label>Expiration date (12/20, 06/21)</label>
<<<<<<< HEAD
                                    <div class="input-group expiration-date"><input class="form-control" type="text" minlength = "2" maxlength = "2" id="monthExpr" name="monthExpr" onchange = "verifyExpiration(this.value, id)" placeholder="MM"><input class="form-control" type="text" id="yearExpr" minlength = "2" maxlength = "2" onchange = "verifyExpirationYear(this.value, id)" placeholder="YY">
=======
                                    <div class="input-group expiration-date"><input class="form-control" type="text" minlength = "2" maxlength = "2" id="monthExpr"  placeholder="MM"><input class="form-control" type="text" id="yearExpr" minlength = "2" maxlength = "2" onchange = "verifyExpirationYear(this.value, id)" placeholder="YY">
>>>>>>> 9a51480ae19d7e8c08d5645e33c04676b80f5b13
                                      <!--This is the validation for the month-->
                                      <script type = "text/javascript">

                                        </script>
                                        <!--This is the validation for the year-->
                                        <script type = "text/javascript">

                                      </script>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-8">
                              <input type="hidden" id="cardType" name="cartType" value="">

                                <!--This is the credit card form-->
<<<<<<< HEAD
                                <div class="form-group"><label for="card-number">Card Number</label><input class="form-control" minlength = "13" maxlength = "16" type="text" onchange = "verifyCard(this.value, id)" id="cardNumber" name="cardNumber" placeholder="Card Number">
=======
                                <div class="form-group"><label for="card-number">Card Number</label><input class="form-control" minlength = "13" maxlength = "16" type="text"  id="cardNumber" placeholder="Card Number">
>>>>>>> 9a51480ae19d7e8c08d5645e33c04676b80f5b13
                                  <!--This is the credit card validation-->
                                  <script type = "text/javascript">

                                  </script>
                                </div>
                            </div>
                            <!--This is the cvc form-->
                            <div class="col-sm-4">
<<<<<<< HEAD
                                <div class="form-group"><label for="cvc">CVC</label><input class="form-control" type="text" onchange = "verifyCVC(this.value, id)" id="cvc" name="cvc" placeholder="CVC" minlength="3" maxlength="4">
=======
                                <div class="form-group"><label for="cvc">CVC</label><input class="form-control" type="text"  id="cvc" placeholder="CVC" minlength="3" maxlength="4">
>>>>>>> 9a51480ae19d7e8c08d5645e33c04676b80f5b13
                                <!--This is the cvc validation-->
                                <script type = "text/javascript">
                      
                                </script>
                              </div>
                            </div>
                            <!--This is the big button on the bottom of the page-->
                            <div class="col-sm-12">
<<<<<<< HEAD
                                <div class="form-group"><button class="btn btn-primary btn-block" id="confirmPurchase" type="button" onClick="purchaseItems()" style="background-color: rgb(79,121,96);margin-top: 20px;height: 40px;">Confirm Purchase</button></div>
=======
                                <div class="form-group"><button class="btn btn-primary btn-block" onclick = "verifyCardHolder(cardHolder.value, id); verifyExpiration(monthExpr.value, id); verifyExpirationYear(yearExpr.value, id); verifyCard(cardNumber.value, id); verifyCVC(cvc.value, id);" id="confirmPurchase" type="button" style="background-color: rgb(79,121,96);margin-top: 20px;height: 40px;">Confirm Purchase</button></div>
>>>>>>> 9a51480ae19d7e8c08d5645e33c04676b80f5b13
                            </div>
                        </div>
                    </div>
                </form>

                <!--This is the last form-->
                <form>
                    <div id="confirmation" class="card-details" style="margin-top: 30px; display: none;">
                        <!--This is the order received page-->
                        <div class="form-row" style="margin-top: 30px;">
                            <div class="col-sm-7 text-center align-self-center m-auto" style="margin-bottom: 0px;">
                                <h6 class="text-center" style="color: rgb(79,121,96);font-size: 50px;">Order Recieved!</h6><i class="fa fa-check-circle" style="font-size: 78px;color: rgb(79,121,96);"></i></div>
                            <div class="col-sm-8 text-center align-self-center m-auto">
                                <p style="margin-top: 25px;">Your Order Has Been Recieved and Is Currently Being Processed.</p>
                                <p>Your Order Number Is:&nbsp;<label for="card-number">#########</label></p>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <br/><br/>
</main>

<script>
function purchaseItems() {
  card = {
    "cardHolder": document.getElementById("cardHolder").value;
  }
}

</script>
